(this["webpackJsonpabs-web"]=this["webpackJsonpabs-web"]||[]).push([[0],{25:function(e,t,a){},26:function(e,t){document.addEventListener("DOMContentLoaded",(function(){var e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.target,a=document.getElementById(t);e.classList.toggle("is-active"),a.classList.toggle("is-active")}))}))}))},36:function(e,t,a){"use strict";a.r(t);a(25),a(26);var c=a(1),s=a.n(c),n=a(21),i=a.n(n),r=a(5),l=a(0);function o(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsxs)("div",{className:"content is-size-6",children:[Object(l.jsxs)("div",{className:"",children:["Created by ",Object(l.jsx)("a",{className:"link",href:"https://github.com/sthfaceless",children:"@sthfaceless"})]}),Object(l.jsx)("div",{className:"",children:Object(l.jsx)("a",{href:"https://github.com/sthfaceless/abs-web",children:Object(l.jsx)("img",{alt:"github",className:"footer__github-link",src:"/static/github-alt.png"})})})]})})}function j(e){var t=Object(c.useState)("main"),a=Object(r.a)(t,2),s=a[0],n=a[1];return e.context.updatePage=n,Object(l.jsxs)("nav",{className:"navbar header",role:"navigation","aria-label":"main navigation",children:[Object(l.jsxs)("div",{className:"navbar-brand",children:[Object(l.jsxs)("a",{className:"navbar-item header__project-link",href:"/",children:[Object(l.jsx)("img",{alt:"logo",src:"/static/apple-touch-iconp.png"}),Object(l.jsx)("h1",{className:"header__project-name has-text-dark",children:"Algebraic Bayesian Networks"})]}),Object(l.jsxs)("a",{href:"#",role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-main",children:[Object(l.jsx)("span",{"aria-hidden":"true"}),Object(l.jsx)("span",{"aria-hidden":"true"}),Object(l.jsx)("span",{"aria-hidden":"true"})]})]}),Object(l.jsx)("div",{id:"navbar-main",className:"navbar-menu is-active",children:Object(l.jsx)("div",{className:"navbar-start",children:Object(l.jsx)("a",{className:"navbar-item"+("main"===s?" is-page":""),href:"/",children:"Knowledge Pattern"})})}),Object(l.jsx)("div",{className:"navbar-end"})]})}var u=a(23),d=a(4);function b(){return Object(l.jsx)("div",{className:"httpcode",children:Object(l.jsxs)("div",{className:"card httpcode__card",children:[Object(l.jsxs)("div",{className:"card-content",children:[Object(l.jsx)("p",{className:"title",children:"404"}),Object(l.jsx)("p",{className:"subtitle",children:"Not found"})]}),Object(l.jsx)("div",{className:"card-footer",children:Object(l.jsx)("p",{className:"card-footer-item",children:Object(l.jsx)("span",{children:Object(l.jsx)("a",{href:"/",className:"httpcode__card__link",children:"Main page"})})})})]})})}var m=a(3),O=a(11),p=a(2);function v(e){return Object(l.jsxs)("div",{className:"kp-container__modifiers",children:[Object(l.jsx)("div",{className:"tags kp-container__modifiers__checkbox",children:Object.values(e.estimationTypes).map((function(t){return Object(l.jsx)("div",{className:"tag kp-container__modifiers__checkitem is-medium"+(t===e.estimationType?" is-active":""),onClick:function(){return e.updateEstimationType(t)},children:t},t)}))}),Object(l.jsxs)("div",{className:"tags has-addons kp-container__modifiers__number",children:[Object(l.jsx)("div",{className:"tag is-medium kp-container__modifiers__number-action",onClick:function(){return e.updateBaseNumber(-1)},children:"-"}),Object(l.jsx)("div",{className:"tag is-medium",children:e.baseNumber}),Object(l.jsx)("div",{className:"tag is-medium kp-container__modifiers__number-action",onClick:function(){return e.updateBaseNumber(1)},children:"+"})]})]})}var h=a(22);function x(e){return Object(l.jsxs)("div",{className:"tags",children:[Object(l.jsx)("div",{className:"tag is-medium kp-container__tab__input-item",children:Object(l.jsx)("input",{type:"text",value:e.firstValue,onChange:function(t){return e.updateValue(t.target.value,0)},className:"input is-small",disabled:!e.modificable})}),Object(l.jsx)("div",{className:"tag is-medium kp-container__tab__center-item "+e.className,children:Object(l.jsx)(h.a,{children:e.expression})}),e.estimationType===e.estimationTypes.INTERVAL&&Object(l.jsx)("div",{className:"kp-container__tab__input-item tag is-medium",children:Object(l.jsx)("input",{type:"text",value:e.secondValue,className:"input is-small",disabled:!e.modificable,onChange:function(t){return e.updateValue(t.target.value,1)}})})]})}var f="/api/kp/inconsistency",N="reconciliationHistory",_=3;var y,g={INTERVAL:"Interval",SCALAR:"Scalar"},k=0,T=1,S=2,C=3,A=4,I=function(e,t){var a;return e===t.QUANTS?{}:Object(m.a)({},0,{value:(a={},Object(m.a)(a,0,1),Object(m.a)(a,1,1),a),valid:!0,className:"is-success"})},L=function(e,t,a){return t===a.QUANTS||0!==e};function V(e){var t=Object(c.useState)(g.INTERVAL),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)(3),o=Object(r.a)(i,2),j=o[0],u=o[1],d=Object(c.useState)(k),b=Object(r.a)(d,2),h=b[0],_=b[1],y=Object(c.useState)(I(e.kpType,e.kpTypes)),V=Object(r.a)(y,2),w=V[0],E=V[1],U=Object(c.useState)(!1),R=Object(r.a)(U,2),M=R[0],D=R[1],P=function(e){return Number.parseFloat(String(e).replaceAll(",","."))},B=function(e){return!!/^[0-9]+(([.,])[0-9]+)?$/.test(e)&&!(0>(e=P(e))||e>1)},Q=function(e,t){return P(t)-P(e)>=0},q=function(e){e!==M&&D(e)},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;(!e||Object.keys(e).length<1<<t)&&q(!1);for(var a=0;a<1<<t;a++)if(!e[a]||!e[a].valid)return void q(!1);q(!0)},F=function(t,a){var c,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,i=arguments.length>3?arguments[3]:void 0;return 0===i&&e.kpType!==e.kpTypes.QUANTS?(c={},Object(m.a)(c,0,1),Object(m.a)(c,1,1),c):Object(p.a)(Object(p.a)({},Object(m.a)({},0,t)),n===g.INTERVAL?Object(m.a)({},1,a):{})},H=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return B(e)&&(a===g.SCALAR||B(t)&&Q(e,t))},z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return H(e,t,a)?"is-success":!e||!t&&a===g.INTERVAL?"is-dark":"is-danger"},K=function(t,a,c,s,n,i){var l=JSON.parse(localStorage.getItem(N))||[],o=[{data:Object.entries(t).reduce((function(e,t){var a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},c,s.value))}),{}),date:(new Date).toLocaleString(),type:a.charAt(0).toUpperCase()+a.slice(1),status:n,statusText:i,estimationType:c,baseNumber:s}].concat(Object(O.a)(l));localStorage.setItem(N,JSON.stringify(o)),e.setItems(o)},G=function(){if($(w),M&&(h===k||h===S)){var t=j,a={};a.data=Object.keys(w).slice(0,1<<j).reduce((function(e,t){return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},t,(a=w[t].value,Object.entries(a).reduce((function(e,t){var a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},c,P(s)))}),{}))));var a}),{}),a.type=e.kpType.toLowerCase(),a.estimationType=s.toLowerCase(),_(T),function(e,t,a){fetch(f,{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Request failed.");return e.json()})).then((function(e){return t(e)})).catch((function(e){return a(e)}))}(a,(function(c){if(c.isInconsistent){_(C);var n=Object.entries(w).reduce((function(e,t){var a,s=Object(r.a)(t,2),n=s[0],i=s[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},n,Object(p.a)(Object(p.a)({},i),{},{value:(a={},Object(m.a)(a,0,c.data[n][0]),Object(m.a)(a,1,c.data[n][1]),a)})))}),I(e.kpType,e.kpTypes));E(n),K(n,a.type,s,t,!0,"Inconsistent")}else{_(A);var i=Object.entries(w).reduce((function(e,t){var a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},c,Object(p.a)(Object(p.a)({},s),{},{className:"is-danger",valid:!1})))}),I(e.kpType,e.kpTypes));E(i),K(i,a.type,s,t,!1,"Not inconsistent")}}),(function(e){_(S),K(w,a.type,s,t,!1,"Server error")}))}};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(v,{estimationTypes:g,estimationType:s,updateEstimationType:function(t){var a=Object.keys(w).reduce((function(e,a){var c=F(w[a].value[0],w[a].value[1],t,Number.parseInt(a)),s=H(w[a].value[0],w[a].value[1],t),n=z(w[a].value[0],w[a].value[1],t);return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},a,{value:c,valid:s,className:n}))}),I(e.kpType,e.kpTypes));n(t),E(a),$(a)},baseNumber:j,updateBaseNumber:function(t){if(h===k){var a=j+t;a=Math.max(a,1),a=Math.min(a,10),u(a);var c=Object.keys(w).splice(0,1<<a).reduce((function(e,t){return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},t,w[t]))}),I(e.kpType,e.kpTypes));E(c),$(c,a)}}}),Object(l.jsx)("div",{className:"kp-container__tab",children:Object(O.a)(Array(1<<j).keys()).map((function(t){var a="$p_{"+J[e.kpType](j,t)+"}$";return L(t,e.kpType,e.kpTypes)&&Object(l.jsx)(x,{expression:a,estimationType:s,estimationTypes:g,modificable:h===k,updateValue:function(e,a){return function(e,t,a){var c=0===t?e:w[a]?w[a].value[0]:"",n=1===t?e:w[a]?w[a].value[1]:"",i=F(c,n,s,a),r=H(c,n),l=z(c,n),o=Object(p.a)(Object(p.a)({},w),{},Object(m.a)({},a,{value:i,valid:r,className:l}));E(o),$(o)}(e,a,t)},firstValue:w[t]&&w[t].value[0]?w[t].value[0]:"",secondValue:w[t]&&w[t].value[1]?w[t].value[1]:"",className:w[t]?w[t].className:"is-dark"},t)}))}),Object(l.jsxs)("div",{className:"kp-container__validate level",children:[Object(l.jsx)("div",{className:"level-left",children:Object(l.jsx)("div",{className:"button kp-container__validate__submit "+(!M||h!==k&&h!==S?"is-inactive":"is-purple"),onClick:function(){return G()},children:"Reconcile"})}),Object(l.jsxs)("div",{className:"level-right",children:[Object(l.jsxs)("div",{className:"kp-container__result",children:[h===T&&Object(l.jsx)("progress",{className:"progress is-small is-primary"}),h===S&&Object(l.jsx)("p",{className:"has-text-danger",children:"Server error"}),h===C&&Object(l.jsx)("p",{className:"has-text-success",children:"Data is inconsistent!"}),h===A&&Object(l.jsx)("p",{className:"has-text-danger-dark",children:"Data is not inconsistent!"})]}),h!==k&&h!==T&&Object(l.jsxs)("div",{className:"kp-container__requested",children:[Object(l.jsx)("div",{className:"button is-purple-light kp-container__requested__state-changer",onClick:function(){return _(k),E(I(e.kpType,e.kpTypes)),void $({})},children:"Clean"}),Object(l.jsx)("div",{className:"button is-purple kp-container__requested__state-changer",onClick:function(){return _(k),void $(w)},children:"Modify"})]})]})]})]})}function w(e){var t=Object(c.useContext)(B),a=t.context,s=t.updateContext,n=Object(c.useState)(0),i=Object(r.a)(n,2),o=i[0],j=i[1],u=e.items?e.items.length:0;return u>0&&Object(l.jsxs)("div",{className:"rhistory",children:[Object(l.jsx)("div",{className:"rhistory__title subtitle",children:"History"}),Object.values(e.items).splice(0,Math.min(u,(o+1)*_)).map((function(t,c){return Object(l.jsx)("div",{className:"rhistory__items",onClick:function(){return function(e,t,c,n,i){var r={active:!0,title:t,content:Object(l.jsx)("div",{className:"kp-container__tab",children:Object.keys(e).map((function(a){var s="$p_{"+J[t](c,a)+"}$";return L(Number.parseInt(a),t,E)&&Object(l.jsx)(x,{expression:s,estimationType:n,estimationTypes:g,modificable:!1,updateValue:function(){},firstValue:e[a][0],secondValue:e[a][1],className:i?"is-success":"is-danger"},a)}))})};s(Object(p.a)(Object(p.a)({},a),{},{modal:r}))}(t.data,t.type,t.baseNumber,t.estimationType,t.status)},children:Object(l.jsxs)("div",{className:"rhistory__item level",children:[Object(l.jsxs)("div",{className:"level-left",children:[Object(l.jsx)("div",{className:"level-item rhistory__item__number",children:c+1}),Object(l.jsx)("div",{className:"level-item rhistory__item__type is-purple",children:t.type}),Object(l.jsx)("div",{className:"level-item is-purple",children:t.date})]}),Object(l.jsxs)("div",{className:"level-right",children:[Object(l.jsx)("div",{className:"level-item rhistory__item__status "+(t.status?"has-text-success":"has-text-danger"),children:t.statusText}),Object(l.jsx)("div",{className:"level-item delete",onClick:function(t){return function(t,a){t.stopPropagation();var c=Object.values(e.items).length,s=e.items.splice(0,a).concat(a===c-1?[]:e.items.splice(a+1,c-1));e.setItems(s),localStorage.setItem(N,JSON.stringify(s))}(t,c)}})]})]})},c)})),Math.min(u,(o+1)*_)<u&&Object(l.jsx)("div",{className:"rhistory__more",children:Object(l.jsx)("div",{className:"button is-rounded is-dark",onClick:function(){return j(o+1)},children:"More"})})]})}var E={CONJUNCTS:"Conjuncts",DISJUNCTS:"Disjuncts",QUANTS:"Quants"},J=(y={},Object(m.a)(y,E.CONJUNCTS,(function(e,t){return Object(O.a)(Array(e).keys()).map((function(e){return 1<<e&t?"x_{"+(e+1)+"}":""})).reduce((function(e,t){return e+t}))||"\\emptyset"})),Object(m.a)(y,E.DISJUNCTS,(function(e,t){return Object(O.a)(Array(e).keys()).map((function(e){return 1<<e&t?"x_{"+(e+1)+"}\\lor ":""})).reduce((function(e,t){return e+t})).slice(0,-"\\lor ".length)||"\\emptyset"})),Object(m.a)(y,E.QUANTS,(function(e,t){return Object(O.a)(Array(e).keys()).map((function(e){return(1<<e&t?"":"\\bar ")+"x_{"+(e+1)+"}"})).reduce((function(e,t){return e+t}))})),y);function U(){var e=Object(c.useState)(JSON.parse(localStorage.getItem(N))),t=Object(r.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(E.CONJUNCTS),i=Object(r.a)(n,2),o=i[0],j=i[1];return Object(l.jsxs)("div",{className:"kp-container",children:[Object(l.jsx)("h1",{className:"kp-container__title title",children:"Reconciliation"}),Object(l.jsx)("div",{className:"kp-container__tab-links tabs",children:Object(l.jsx)("ul",{children:Object.values(E).map((function(e){return Object(l.jsx)("li",{className:o===e?" is-active":"",children:Object(l.jsx)("a",{href:"#",className:"panel__tab-link",onClick:function(){return j(e)},children:e})},e)}))})}),Object.values(E).map((function(e){return e===o&&Object(l.jsx)(V,{kpType:e,kpTypes:E,items:a,setItems:s},e)})),Object(l.jsx)(w,{items:a,setItems:s})]})}function R(e){return Object(l.jsx)("div",{className:"container main-container",children:Object(l.jsx)(u.a,{children:Object(l.jsxs)(d.c,{children:[Object(l.jsx)(d.a,{path:"/",exact:!0,render:function(){return e.header.updatePage("main"),Object(l.jsx)(U,{})}}),Object(l.jsx)(d.a,{render:function(){return e.header.updatePage("unknown"),Object(l.jsx)(b,{})}})]})})})}var M=function(e,t){t(Object(p.a)(Object(p.a)({},e),{},{modal:Object(p.a)(Object(p.a)({},e.modal),{},{active:!1})}))};function D(){var e=Object(c.useContext)(B),t=e.context,a=e.updateContext;return Object(l.jsxs)("div",{className:"modal"+(t.modal.active?" is-active":""),children:[Object(l.jsx)("div",{className:"modal-background",onClick:function(){return M(t,a)}}),Object(l.jsxs)("div",{className:"modal-card",children:[Object(l.jsx)("div",{className:"modal-card-head",children:t.modal.title}),Object(l.jsx)("div",{className:"modal-card-body",children:t.modal.content}),t.modal.footer&&Object(l.jsx)("div",{className:"modal-card-foot",children:t.modal.footer})]}),Object(l.jsx)("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return M(t,a)}})]})}var P={modal:{active:!1,title:"Info",content:Object(l.jsx)("div",{children:"Sample"}),footer:""}},B=Object(c.createContext)(P);function Q(){var e=Object(c.useState)(P),t=Object(r.a)(e,2),a=t[0],s=t[1],n={updatePage:function(){}};return Object(l.jsxs)(B.Provider,{value:{context:a,updateContext:s},children:[Object(l.jsx)(j,{context:n}),Object(l.jsx)(R,{header:n}),Object(l.jsx)(o,{}),Object(l.jsx)(D,{})]})}i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(Q,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.1cd2b70d.chunk.js.map